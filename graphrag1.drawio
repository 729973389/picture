<mxfile host="Electron" modified="2026-01-07T00:00:00.000Z" agent="draw.io" version="24.4.0">
  <diagram name="Entity-Centric GraphRAG">
    <mxGraphModel dx="1600" dy="900" grid="1" gridSize="10">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- ===== PHASE 1 ===== -->
        <mxCell id="p1" value="PHASE 1｜文本 → 实体知识建模（离线）"
          style="rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1"
          vertex="1" parent="1">
          <mxGeometry x="40" y="40" width="520" height="560" as="geometry"/>
        </mxCell>

        <mxCell id="doc" value="源文档&lt;br&gt;规程 / 报告 / 专家经验"
          style="shape=note;fillColor=#f5f5f5;strokeColor=#666666"
          vertex="1" parent="1">
          <mxGeometry x="80" y="140" width="160" height="90" as="geometry"/>
        </mxCell>

        <mxCell id="chunk" value="文本切分&lt;br&gt;(Chunking)"
          style="rounded=1;fillColor=#ffffff;strokeColor=#6c8ebf"
          vertex="1" parent="1">
          <mxGeometry x="300" y="140" width="200" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="extract" value="实体 / 关系抽取 LLM"
          style="rounded=1;fillColor=#ffffff;strokeColor=#6c8ebf"
          vertex="1" parent="1">
          <mxGeometry x="300" y="230" width="200" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="entity" value="标准化实体层&lt;br&gt;(Canonical Entity)&lt;br&gt;示例：电损 / 轴承过热"
          style="rounded=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1"
          vertex="1" parent="1">
          <mxGeometry x="300" y="330" width="260" height="90" as="geometry"/>
        </mxCell>

        <mxCell id="embed" value="实体语义 Embedding&lt;br&gt;(Entity-level Vector)"
          style="rounded=1;fillColor=#fff2cc;strokeColor=#d6b656"
          vertex="1" parent="1">
          <mxGeometry x="80" y="350" width="180" height="70" as="geometry"/>
        </mxCell>

        <!-- ===== Graph DB ===== -->
        <mxCell id="graph" value="向量化图数据库&lt;br&gt;• 实体节点&lt;br&gt;• 因果 / 影响关系&lt;br&gt;• 实体向量属性"
          style="rounded=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontStyle=1"
          vertex="1" parent="1">
          <mxGeometry x="620" y="180" width="320" height="260" as="geometry"/>
        </mxCell>

        <!-- ===== PHASE 2 ===== -->
        <mxCell id="p2" value="PHASE 2｜实体检索 → 因果链生成（在线）"
          style="rounded=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontStyle=1"
          vertex="1" parent="1">
          <mxGeometry x="980" y="40" width="560" height="560" as="geometry"/>
        </mxCell>

        <mxCell id="user" value="用户问题&lt;br&gt;“电耗过高原因？”"
          style="shape=actor"
          vertex="1" parent="1">
          <mxGeometry x="1440" y="140" width="40" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="qembed" value="查询 Embedding&lt;br&gt;(语义向量)"
          style="rounded=1;fillColor=#d5e8d4;strokeColor=#82b366"
          vertex="1" parent="1">
          <mxGeometry x="1180" y="140" width="200" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="retrieval" value="实体检索控制器&lt;br&gt;1️⃣ 向量命中实体&lt;br&gt;2️⃣ 沿图遍历因果链"
          style="rounded=1;fillColor=#ffffff;strokeColor=#d79b00"
          vertex="1" parent="1">
          <mxGeometry x="1080" y="260" width="300" height="110" as="geometry"/>
        </mxCell>

        <mxCell id="context" value="因果关系链上下文组装"
          style="rounded=1;fillColor=#ffffff;strokeColor=#d79b00"
          vertex="1" parent="1">
          <mxGeometry x="1120" y="410" width="260" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="llm" value="生成式 LLM&lt;br&gt;（解释 / 推理 / 说明）"
          style="rounded=1;fillColor=#fff2cc;strokeColor=#d6b656"
          vertex="1" parent="1">
          <mxGeometry x="1400" y="410" width="200" height="70" as="geometry"/>
        </mxCell>

        <!-- ===== Edges PHASE 1 ===== -->
        <mxCell edge="1" parent="1" source="doc" target="chunk">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell edge="1" parent="1" source="chunk" target="extract">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell edge="1" parent="1" source="extract" target="entity">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell edge="1" parent="1" source="entity" target="embed" value="实体语义向量化">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell edge="1" parent="1" source="entity" target="graph" value="实体 + 关系入图">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell edge="1" parent="1" source="embed" target="graph" value="向量作为实体属性">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- ===== Edges PHASE 2 ===== -->
        <mxCell edge="1" parent="1" source="user" target="qembed">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell edge="1" parent="1" source="qembed" target="retrieval">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell edge="1" parent="1" source="retrieval" target="graph"
          value="向量相似度 → 命中实体">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell edge="1" parent="1" source="graph" target="retrieval"
          value="沿因果 / 影响关系遍历">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell edge="1" parent="1" source="retrieval" target="context">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell edge="1" parent="1" source="context" target="llm">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
