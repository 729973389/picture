<mxfile host="Electron" modified="2026-01-07T00:00:00.000Z" agent="draw.io" version="24.4.0">
  <diagram name="Entity-Centric GraphRAG">
    <mxGraphModel dx="1400" dy="800" grid="1" gridSize="10">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- PHASE 1 -->
        <mxCell id="p1" value="PHASE 1｜文本 → 实体知识建模（离线）"
          style="rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1"
          vertex="1" parent="1">
          <mxGeometry x="40" y="60" width="420" height="520"/>
        </mxCell>

        <!-- Source Doc -->
        <mxCell id="doc" value="源文档 / 规程 / 专家经验"
          style="shape=note;fillColor=#f5f5f5;strokeColor=#666666"
          vertex="1" parent="1">
          <mxGeometry x="70" y="180" width="120" height="80"/>
        </mxCell>

        <!-- Chunk -->
        <mxCell id="chunk" value="文本切分 (Chunking)"
          style="rounded=1;fillColor=#ffffff;strokeColor=#6c8ebf"
          vertex="1" parent="1">
          <mxGeometry x="230" y="180" width="160" height="60"/>
        </mxCell>

        <!-- Entity Extraction -->
        <mxCell id="extract" value="实体 / 关系抽取 LLM"
          style="rounded=1;fillColor=#ffffff;strokeColor=#6c8ebf"
          vertex="1" parent="1">
          <mxGeometry x="230" y="260" width="160" height="70"/>
        </mxCell>

        <!-- Canonical Entity -->
        <mxCell id="entity" value="标准化实体层 (Canonical Entity)
示例：电损 / 轴承过热"
          style="rounded=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1"
          vertex="1" parent="1">
          <mxGeometry x="230" y="360" width="200" height="80"/>
        </mxCell>

        <!-- Embedding -->
        <mxCell id="embed" value="实体语义 Embedding
（Entity-level）"
          style="rounded=1;fillColor=#fff2cc;strokeColor=#d6b656"
          vertex="1" parent="1">
          <mxGeometry x="70" y="380" width="140" height="70"/>
        </mxCell>

        <!-- Graph DB -->
        <mxCell id="graph" value="向量化图数据库
(Graph + Entity Vector)"
          style="shape=cylinder3;fillColor=#e1d5e7;strokeColor=#9673a6;fontStyle=1"
          vertex="1" parent="1">
          <mxGeometry x="520" y="120" width="260" height="420"/>
        </mxCell>

        <!-- PHASE 2 -->
        <mxCell id="p2" value="PHASE 2｜实体检索 → 因果链生成（在线）"
          style="rounded=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontStyle=1"
          vertex="1" parent="1">
          <mxGeometry x="820" y="60" width="460" height="520"/>
        </mxCell>

        <!-- User -->
        <mxCell id="user" value="用户问题
“电耗过高原因？”"
          style="shape=actor"
          vertex="1" parent="1">
          <mxGeometry x="1180" y="160" width="40" height="60"/>
        </mxCell>

        <!-- Query Embedding -->
        <mxCell id="qembed" value="查询 Embedding"
          style="rounded=1;fillColor=#d5e8d4;strokeColor=#82b366"
          vertex="1" parent="1">
          <mxGeometry x="980" y="150" width="160" height="60"/>
        </mxCell>

        <!-- Retrieval -->
        <mxCell id="retrieval" value="实体检索控制器
1️⃣ 向量命中实体
2️⃣ 图遍历扩展因果"
          style="rounded=1;fillColor=#ffffff;strokeColor=#d79b00"
          vertex="1" parent="1">
          <mxGeometry x="880" y="260" width="220" height="120"/>
        </mxCell>

        <!-- Context -->
        <mxCell id="context" value="因果关系链上下文组装"
          style="rounded=1;fillColor=#ffffff;strokeColor=#d79b00"
          vertex="1" parent="1">
          <mxGeometry x="940" y="420" width="220" height="60"/>
        </mxCell>

        <!-- LLM -->
        <mxCell id="llm" value="生成式 LLM（解释说明）"
          style="rounded=1;fillColor=#fff2cc;strokeColor=#d6b656"
          vertex="1" parent="1">
          <mxGeometry x="1180" y="420" width="160" height="60"/>
        </mxCell>

        <!-- Edges -->
        <mxCell edge="1" parent="1" source="doc" target="chunk"/>
        <mxCell edge="1" parent="1" source="chunk" target="extract"/>
        <mxCell edge="1" parent="1" source="extract" target="entity"/>

        <!-- Split -->
        <mxCell edge="1" parent="1" source="entity" target="graph"
          value="实体 + 关系 → 图结构"/>
        <mxCell edge="1" parent="1" source="entity" target="embed"
          value="实体语义向量化"/>
        <mxCell edge="1" parent="1" source="embed" target="graph"
          value="向量作为实体属性"/>

        <!-- Query -->
        <mxCell edge="1" parent="1" source="user" target="qembed"/>
        <mxCell edge="1" parent="1" source="qembed" target="retrieval"/>
        <mxCell edge="1" parent="1" source="retrieval" target="graph"
          value="向量相似度 → 命中实体"/>
        <mxCell edge="1" parent="1" source="graph" target="retrieval"
          value="沿因果关系遍历"/>
        <mxCell edge="1" parent="1" source="retrieval" target="context"/>
        <mxCell edge="1" parent="1" source="context" target="llm"/>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
